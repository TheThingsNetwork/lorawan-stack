<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.59.1" />
  <title>Command-line Interface | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://thethingsstack.io/v3.4.0/guides/getting-started/cli/" />
  <link rel="icon" type="image/png" href="/v3.4.0/favicon.png">
  <link rel="stylesheet" href="https://thethingsstack.io/v3.4.0/css/theme.min.090173fef411fe1179cbb40989d85adbfb5ea13a21f59ef6af19496b7de096af.css" integrity="sha256-CQFz/vQR/hF5y7QJidha2/teoToh9Z72rxlJa33glq8=">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Command-line Interface">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Command-line Interface">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://thethingsstack.io/v3.4.0/guides/getting-started/cli/">
  <meta name="twitter:title" content="Command-line Interface" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
</head>


<body>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/v3.4.0/">
        <img src="/v3.4.0/img/TTS-logo.svg">
      </a>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/v3.4.0/guides/">Guides</a>
        <a class="navbar-item" href="/v3.4.0/concepts/">Concepts</a>
        <a class="navbar-item" href="/v3.4.0/components/">Components</a>
        <a class="navbar-item" href="/v3.4.0/reference/">Reference</a>
      </div>
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/TheThingsNetwork/lorawan-stack">GitHub</a>
        <a class="navbar-item" href="https://www.thethingsnetwork.org/forum/c/network-and-routing/v3">Forum</a>
        <div class="navbar-item">
          <a class="button is-primary" href="/v3.4.0/download/">Get The Things Stack</a>
        </div>
      </div>
    </div>
  </div>
</nav>


<main>
<section class="section">
  <div class="container">
    <div class="columns">
      
      <div class="column is-one-third">


<h2 class="title is-size-4">Getting Started</h2>

<ul class="menu-list">
<a href="https://thethingsstack.io/v3.4.0/guides/getting-started/" class="">Overview</a>
<li>
  <a href="https://thethingsstack.io/v3.4.0/guides/getting-started/installation/" class="">Installation</a>
</li>
<li>
  <a href="https://thethingsstack.io/v3.4.0/guides/getting-started/certificates/" class="">Certificates</a>
</li>
<li>
  <a href="https://thethingsstack.io/v3.4.0/guides/getting-started/configuration/" class="">Configuration</a>
</li>
<li>
  <a href="https://thethingsstack.io/v3.4.0/guides/getting-started/running-the-stack/" class="">Running The Things Stack</a>
</li>
<li>
  <a href="https://thethingsstack.io/v3.4.0/guides/getting-started/console/" class="">Console</a>
</li>
<li>
  <a href="https://thethingsstack.io/v3.4.0/guides/getting-started/cli/" class="is-active">Command-line Interface</a>
</li>
<li>
  <a href="https://thethingsstack.io/v3.4.0/guides/getting-started/working-with-data/" class="">Working With Data</a>
</li>
</ul>





      </div>
      
      <div class="column is-two-thirds">

<h1 class="title is-size-2">Command-line Interface</h1>

<div class="content">

<p>Although the web interface of The Things Stack (the Console) currently has support for all basic features of The Things Stack, for some actions, you need to use the command-line interface (CLI). The CLI allows you to manage all features of The Things Stack.
You can use the CLI on your local machine and on the server.</p>

<blockquote>
<p>Note: if you need help with any CLI command, use the <code>--help</code> flag to get a list of subcommands, flags and their description and aliases.</p>
</blockquote>

<h2 id="installation">Installation</h2>

<h3 id="package-managers-recommended">Package managers (recommended)</h3>

<h4 id="macos">macOS</h4>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ brew install TheThingsNetwork/lorawan-stack/ttn-lw-stack</code></pre></div>
<h4 id="linux">Linux</h4>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo snap install ttn-lw-stack
$ sudo snap <span class="nb">alias</span> ttn-lw-stack.ttn-lw-cli ttn-lw-cli</code></pre></div>
<h3 id="binaries">Binaries</h3>

<p>You can download <a href="https://github.com/TheThingsNetwork/lorawan-stack/releases">pre-built binaries</a> for your operating system and processor architecture.</p>

<h2 id="configuration">Configuration</h2>

<p>The command-line needs to be configured to connect to your deployment on <code>thethings.example.com</code>. You have multiple options to make the configuration file available to the CLI:</p>

<ol>
<li>Environment: <code>export TTN_LW_CONFIG=/path/to/ttn-lw-cli.yml</code></li>
<li>Command-line flag: <code>-c /path/to/ttn-lw-cli.yml</code></li>

<li><p>Save as <code>.ttn-lw-cli.yml</code> in <code>$XDG_CONFIG_HOME</code>, your home directory, or the working directory.</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml">oauth-server-address<span class="p">:</span><span class="w"> </span><span class="s1">&#39;https://thethings.example.com/oauth&#39;</span><span class="w">
</span><span class="w">
</span><span class="w"></span>identity-server-grpc-address<span class="p">:</span><span class="w"> </span><span class="s1">&#39;thethings.example.com:8884&#39;</span><span class="w">
</span><span class="w"></span>gateway-server-grpc-address<span class="p">:</span><span class="w"> </span><span class="s1">&#39;thethings.example.com:8884&#39;</span><span class="w">
</span><span class="w"></span>network-server-grpc-address<span class="p">:</span><span class="w"> </span><span class="s1">&#39;thethings.example.com:8884&#39;</span><span class="w">
</span><span class="w"></span>application-server-grpc-address<span class="p">:</span><span class="w"> </span><span class="s1">&#39;thethings.example.com:8884&#39;</span><span class="w">
</span><span class="w"></span>join-server-grpc-address<span class="p">:</span><span class="w"> </span><span class="s1">&#39;thethings.example.com:8884&#39;</span><span class="w">
</span><span class="w"></span>device-claiming-server-grpc-address<span class="p">:</span><span class="w"> </span><span class="s1">&#39;thethings.example.com:8884&#39;</span><span class="w">
</span><span class="w"></span>device-template-converter-grpc-address<span class="p">:</span><span class="w"> </span><span class="s1">&#39;thethings.example.com:8884&#39;</span><span class="w">
</span><span class="w"></span>qr-code-generator-grpc-address<span class="p">:</span><span class="w"> </span><span class="s1">&#39;thethings.example.com:8884&#39;</span></code></pre></div></li>
</ol>

<p>For advanced options, see the <a href="https://thethingsstack.io/v3.4.0/reference/configuration/cli/">Configuration Reference</a>.</p>

<h2 id="login">Login</h2>

<p>The CLI needs to be logged on in order to create gateways, applications, devices and API keys. With The Things Stack running in one terminal session, login with the following command:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli login</code></pre></div>
<p>This will open a browser window with the OAuth login page where you can login with your credentials. This is also where you can create a new account if you do not already have one.</p>

<blockquote>
<p>During the login procedure, the CLI starts a webserver on <code>localhost</code> in order to receive the OAuth callback after login. If you are running the CLI on a machine that is not <code>localhost</code>, you can pass the <code>--callback=false</code> flag. This will allow you to perform part of the OAuth flow on a different machine, and copy-paste a code back into the CLI.</p>
</blockquote>

<h2 id="create-gateway">Create Gateway</h2>

<p>First, list the available frequency plans:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli gateways list-frequency-plans</code></pre></div>
<p>Then, create the first gateway with the chosen frequency plan:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli gateways create gtw1 <span class="se">\
</span><span class="se"></span>  --user-id admin <span class="se">\
</span><span class="se"></span>  --frequency-plan-id EU_863_870 <span class="se">\
</span><span class="se"></span>  --gateway-eui 00800000A00009EF <span class="se">\
</span><span class="se"></span>  --enforce-duty-cycle</code></pre></div>
<p>This creates a gateway <code>gtw1</code> with user <code>admin</code> as collaborator, frequency plan <code>EU_863_870</code>, EUI <code>00800000A00009EF</code> and respecting duty-cycle limitations. You can now connect your gateway to The Things Stack.</p>

<blockquote>
<p>Note: The CLI returns the created and updated entities by default in JSON. This can be useful in scripts.</p>
</blockquote>

<h3 id="create-gateway-api-key">Create Gateway API Key</h3>

<p>Some gateways require an API Key with Link Gateway Rights to be able to connect to The Things Stack.</p>

<p>Create an API key for the gateway:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli gateways api-keys create <span class="se">\
</span><span class="se"></span>  --name link <span class="se">\
</span><span class="se"></span>  --gateway-id gtw1 <span class="se">\
</span><span class="se"></span>  --right-gateway-link</code></pre></div>
<p>The CLI will return an API key such as <code>NNSXS.VEEBURF3KR77ZR...</code>. This API key has only link rights and can therefore only be used for linking this gateway. Make sure to copy the key and save it in a safe place. You will not be able to see this key again in the future, and if you lose it, you can create a new one to replace it in the gateway configuration.</p>

<h2 id="create-application">Create Application</h2>

<p>Create the first application:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli applications create app1 --user-id admin</code></pre></div>
<p>This creates an application <code>app1</code> with the <code>admin</code> user as collaborator.</p>

<p>Devices are created within applications.</p>

<h3 id="link-application">Link Application</h3>

<p>In order to send uplinks and receive downlinks from your device, you must link the Application Server to the Network Server. In order to do this, create an API key for the Application Server:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli applications api-keys create <span class="se">\
</span><span class="se"></span>  --name link <span class="se">\
</span><span class="se"></span>  --application-id app1 <span class="se">\
</span><span class="se"></span>  --right-application-link</code></pre></div>
<p>The CLI will return an API key such as <code>NNSXS.VEEBURF3KR77ZR...</code>. This API key has only link rights and can therefore only be used for linking this application. Make sure to copy the key and save it in a safe place. You will not be able to see this key again in the future, and if you lose it, you can create a new one to replace it in the gateway configuration.</p>

<p>You can now link the Application Server to the Network Server:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli applications link <span class="nb">set</span> app1 --api-key NNSXS.VEEBURF3KR77ZR..</code></pre></div>
<p>Your application is now linked. You can now use the builtin MQTT server and webhooks to receive uplink traffic and send downlink traffic.</p>

<h2 id="create-end-device">Create End Device</h2>

<p>First, list the available frequency plans and LoRaWAN versions:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli end-devices list-frequency-plans
$ ttn-lw-cli end-devices create --help</code></pre></div>
<h3 id="over-the-air-activation-otaa-device">Over-The-Air-Activation (OTAA) Device</h3>

<p>To create an end device using over-the-air-activation (OTAA):</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli end-devices create app1 dev1 <span class="se">\
</span><span class="se"></span>  --dev-eui 0004A30B001C0530 <span class="se">\
</span><span class="se"></span>  --app-eui 800000000000000C <span class="se">\
</span><span class="se"></span>  --frequency-plan-id EU_863_870 <span class="se">\
</span><span class="se"></span>  --root-keys.app-key.key 752BAEC23EAE7964AF27C325F4C23C9A <span class="se">\
</span><span class="se"></span>  --lorawan-version <span class="m">1</span>.0.3 <span class="se">\
</span><span class="se"></span>  --lorawan-phy-version <span class="m">1</span>.0.3-a</code></pre></div>
<p>This will create a LoRaWAN 1.0.3 end device <code>dev1</code> in application <code>app1</code> with the <code>EU_863_870</code> frequency plan.</p>

<p>The end device should now be able to join the private network.</p>

<blockquote>
<p>Note: The <code>AppEUI</code> is returned as <code>join_eui</code> (V3 uses LoRaWAN 1.1 terminology).</p>

<p>Hint: You can also pass <code>--with-root-keys</code> to have root keys generated.</p>
</blockquote>

<h3 id="activation-by-personalization-abp-device">Activation By Personalization (ABP) Device</h3>

<p>It is also possible to register an ABP activated device using the <code>--abp</code> flag as follows:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli end-devices create app1 dev2 <span class="se">\
</span><span class="se"></span>  --frequency-plan-id EU_863_870 <span class="se">\
</span><span class="se"></span>  --lorawan-version <span class="m">1</span>.0.3 <span class="se">\
</span><span class="se"></span>  --lorawan-phy-version <span class="m">1</span>.0.3-a <span class="se">\
</span><span class="se"></span>  --abp <span class="se">\
</span><span class="se"></span>  --session.dev-addr 00E4304D <span class="se">\
</span><span class="se"></span>  --session.keys.app-s-key.key A0CAD5A30036DBE03096EB67CA975BAA <span class="se">\
</span><span class="se"></span>  --session.keys.nwk-s-key.key B7F3E161BC9D4388E6C788A0C547F255</code></pre></div>
<blockquote>
<p>Note: The <code>NwkSKey</code> is returned as <code>f_nwk_s_int_key</code> (The Things Stack uses LoRaWAN 1.1 terminology).</p>

<p>Hint: You can also pass <code>--with-session</code> to have a session generated.</p>
</blockquote>
</div>


<div class="is-clearfix">
<a class="button is-pulled-left" href="/v3.4.0/guides/getting-started/console/">← Console</a>
<a class="button is-pulled-right" href="/v3.4.0/guides/getting-started/working-with-data/">Working With Data →</a>
</div>




      </div>
    </div>
  </div>
</section>
</main>

<footer class="footer has-background-primary">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/v3.4.0/guides/">Guides</a></p>
        <p><a class="" href="/v3.4.0/concepts/">Concepts</a></p>
        <p><a class="" href="/v3.4.0/components/">Components</a></p>
        <p><a class="" href="/v3.4.0/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsNetwork/lorawan-stack">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/network-and-routing/v3">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="has-text-light is-size-7">
  Last changed by Sebastien CHEVALIER on 12 Dec 2019.
  <br>
  <a href="https://github.com/TheThingsNetwork/lorawan-stack/commit/19b035b63739d3c0f562927b07a1475bf36d13c8">
      doc: Move CLI installation in getting started from installation to CLI
    </a>
</p>

<a href="https://github.com/TheThingsNetwork/lorawan-stack/edit/master/doc/content/guides/getting-started/cli/_index.md" class="button is-primary is-small is-inverted is-outlined">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="https://thethingsstack.io/v3.4.0/js/theme.min.df15d52bc4d1307cdd17a69bb1c802fb4d36b2e7b3411817277dc80c16b97f3c.js" integrity="sha256-3xXVK8TRMHzdF6abscgC&#43;002suezQRgXJ33IDBa5fzw="></script>


</body>

</html>
